---
import { getCollection } from "astro:content"
import PageLayout from "@layouts/PageLayout.astro"
import ArrowCard from "@components/ArrowCard"
import StackCard from "@components/StackCard.astro"
import { SITE, SOCIALS } from "@consts"
import TwinklingStars from "@components/TwinklingStars.astro"
import MeteorShower from "@components/MeteorShower.astro"

const posts = (await getCollection("blog"))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0,3)

const projects = (await getCollection("projects"))
  .filter(project => !project.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0,3)


const stack = [
  { 
    text: "Astro", 
    icon: "astro", 
    href: "https://astro.build" 
  },
  { 
    text: "Javascript", 
    icon: "javascript", 
    href: "https://www.javascript.com" 
  },
  { 
    text: "Typescript", 
    icon: "typescript", 
    href: "https://www.typescriptlang.org" 
  },
  { 
    text: "Tailwind", 
    icon: "tailwind", 
    href: "https://tailwindcss.com" 
  },
]
---

<PageLayout title="Home" description={SITE.DESCRIPTION}>

  <!-- Light Mode: Particles -->
  <div class='absolute inset-0 block dark:hidden pointer-events-none'>
    <div id='particles1' class='fixed inset-0'></div>
    <div id='particles2' class='fixed inset-0'></div>
    <div id='particles3' class='fixed inset-0'></div>
  </div>

  <!-- Dark Theme: Stars -->
  <div class='absolute inset-0 bg-black hidden dark:block pointer-events-none'>
    <div id='stars1' class='fixed inset-0'></div>
    <div id='stars2' class='fixed inset-0'></div>
    <div id='stars3' class='fixed inset-0'></div>
  </div>

  <!-- Dark Theme: Twinkling Stars / Metors -->
  <div id="galaxy" class="fixed inset-0 pointer-events-none">
    <div class="hidden dark:block">
      <TwinklingStars/>
      <MeteorShower/>
    </div>
  </div>

  <script is:inline src="/js/bg.js"></script>
  
  <!-- HERO -->
  <section class="relative w-full min-h-[200px] sm:min-h-[250px] flex items-center pt-8 pb-8">
    <div class="absolute inset-0 bg-gradient-to-b from-white/50 to-white dark:from-black/50 dark:to-black"></div>
    <div class="relative z-10 w-full mx-auto max-w-[720px] px-4 sm:px-6">
      <h1 class="text-left mb-4">
        <span class="block text-3xl sm:text-4xl md:text-5xl font-extrabold text-black dark:text-white leading-tight">
          Hi <span class="wave inline-block align-middle">ðŸ‘‹</span>
        </span>
      </h1>
      <p class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 font-normal font-sans mb-4">
        <!-- Software Developer | Data Engineer | Cloud Focussed | ML & AI Enthusiast -->
      </p>
    </div>
  </section>

  <div class="relative bg-white dark:bg-black pb-8">
    <div class="mx-auto max-w-[720px] px-4 sm:px-6 space-y-8">

      <!-- About Section -->
      <section class="animate mt-[-2rem] mb-12">
        <div class="flex flex-col gap-4 sm:gap-6">
          <p class="text-base sm:text-lg font-normal text-black dark:text-white mb-2">
            Welcome to my technical playground. I'm Vinay Gautam, PhD in Computer Science from NTNU, Norway. My work brings together the rigor of research and the creativity of hands-on engineering. After several years working at the crossroads of computer science, natural computing, bio-inspired AI, semantic data engineering, knowledge graphs, and research infrastructure, I've transitioned toward building practical, real-world systems that bridge research depth with engineering precision.
          </p>
          <p class="text-base sm:text-lg font-normal text-black dark:text-white mb-2">
            Here, I share my personal notes, scripts, and projects spanning Linux, DevOps, self-hosted homelabs, semantic data engineering, and context-aware GenAI. My work and curiosity center on building intelligent, reliable systems â€” hands-on, open-source, and grounded in real data.
          </p>
          <p class="text-base sm:text-lg font-normal text-black dark:text-white">
            This space serves as both a lab and a logbook: you'll find technical how-to guides, automation snippets, developer insights, and deep dives into the projects I'm working on. Whether you're a developer, researcher, or just a curious tinkerer, I hope you'll find something here that sparks your curiosity, helps you learn, or inspires your next build.
          </p>
          <p class="text-sm sm:text-base text-gray-700 dark:text-gray-300 mt-4">
            If you don't want to miss my posts, <a href="/contact#newsletter" class="text-purple-600 dark:text-purple-400 font-semibold underline hover:text-purple-700 dark:hover:text-purple-300 transition-colors">subscribe to my newsletter</a>.
          </p>
        </div>
      </section>

      <!-- Blog Preview Section -->
      <section class="animate mt-16">
        <div class="space-y-4">
          <div class="flex justify-between items-end">
            <p class="font-semibold text-xl text-black dark:text-white text-left">
              Recent blogs
            </p>
            <a href="/blog" class="w-fit col-span-3 group flex gap-1 items-center underline decoration-[.5px] decoration-black/25 dark:decoration-white/50 hover:decoration-black dark:hover:decoration-white text-black dark:text-white underline-offset-2 blend text-base md:text-lg">
              <span class="text-black/75 dark:text-white/75 group-hover:text-black group-hover:dark:text-white blend">
                All posts
              </span>
            </a>
          </div>
          <ul class="flex flex-col gap-6 sm:gap-8">
            {posts.map((post) => (
              <li>
                <a href={`/${post.collection}/${post.slug}`} class="block bg-white dark:bg-gray-900 rounded-2xl shadow p-4 sm:p-6 md:p-8 border border-gray-100 dark:border-gray-800 hover:shadow-lg transition">
                  <h2 class="text-lg sm:text-xl font-semibold text-black dark:text-white mb-2">{post.data.title}</h2>
                  <div class="flex flex-wrap gap-2 mb-2">
                    {post.data.tags && post.data.tags.map((tag) => (
                      <span class="inline-block px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-xs font-semibold text-gray-700 dark:text-gray-300">{tag}</span>
                    ))}
                  </div>
                  <p class="text-gray-700 dark:text-gray-300 mb-4 line-clamp-2">{post.data.summary}</p>
                  <div class="flex items-center gap-2 mt-4">
                    {/* Optional: If you have author avatar, add here */}
                    {/* <img src={post.data.authorAvatar} alt="Vinay Gautam" class="w-6 h-6 rounded-full" /> */}
                    <span class="text-sm font-medium text-gray-800 dark:text-gray-200">Vinay Gautam</span>
                    <span class="text-xs text-gray-500">â€¢</span>
                    <span class="text-xs text-gray-500">{post.data.date.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })}</span>
                  </div>
                </a>
              </li>
            ))}
          </ul>
        </div>
      </section>

      <!-- Project Preview Section -->
      <section class="animate mt-12">
        <div class="space-y-4">
          <div class="flex justify-between items-end">
            <p class="font-semibold text-xl text-black dark:text-white text-left">
              Recent projects
            </p>
            <a href="/projects" class="w-fit col-span-3 group flex gap-1 items-center underline decoration-[.5px] decoration-black/25 dark:decoration-white/50 hover:decoration-black dark:hover:decoration-white text-black dark:text-white underline-offset-2 blend text-base md:text-lg">
              <span class="text-black/75 dark:text-white/75 group-hover:text-black group-hover:dark:text-white blend">
                All projects
              </span>
            </a>
          </div>
          <ul class="space-y-4 sm:space-y-6">
            {projects.map((project) => (
              <li>
                <a href={`/${project.collection}/${project.slug}`} class="block bg-white dark:bg-gray-900 rounded-2xl shadow p-4 sm:p-6 md:p-8 border border-gray-100 dark:border-gray-800 hover:shadow-lg transition max-w-full">
                  <h2 class="text-lg sm:text-xl font-semibold text-black dark:text-white mb-2">{project.data.title}</h2>
                  <div class="flex flex-wrap gap-2 mb-2">
                    {project.data.tags && project.data.tags.map((tag) => (
                      <span class="inline-block px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-800 text-xs font-semibold text-gray-700 dark:text-gray-300">{tag}</span>
                    ))}
                  </div>
                  <p class="text-gray-700 dark:text-gray-300 mb-4 line-clamp-2">{project.data.summary}</p>
                  <div class="flex items-center gap-2 mt-4">
                    {/* Optional: If you have project avatar, add here */}
                    {/* <img src={project.data.projectAvatar} alt="Project Avatar" class="w-6 h-6 rounded-full" /> */}
                    <span class="text-sm font-medium text-gray-800 dark:text-gray-200">Vinay Gautam</span>
                    <span class="text-xs text-gray-500">â€¢</span>
                    <span class="text-xs text-gray-500">{project.data.date.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })}</span>
                  </div>
                </a>
              </li>
            ))}
          </ul>
        </div>
      </section>
    </div>
  </div>
</PageLayout>
